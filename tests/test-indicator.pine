//@version=6
indicator("Complete Indicator Example", overlay=true, max_bars_back=500)

// Inputs
length = input.int(20, title="Length", minval=1)
source = input.source(close, title="Source")
showSignal = input.bool(true, title="Show Signal")

// Calculations
sma = ta.sma(source, length)
ema = ta.ema(source, length)
rsi = ta.rsi(source, 14)

// Conditions
bullish = ta.crossover(sma, ema)
bearish = ta.crossunder(sma, ema)

// Plots
plot(sma, title="SMA", color=color.blue, linewidth=2)
plot(ema, title="EMA", color=color.red, linewidth=2)

// Shapes
plotshape(bullish and showSignal, title="Bullish", location=location.belowbar, 
          color=color.green, style=shape.triangleup, size=size.small)
plotshape(bearish and showSignal, title="Bearish", location=location.abovebar, 
          color=color.red, style=shape.triangledown, size=size.small)

// Background
bgcolor(bullish ? color.new(color.green, 90) : bearish ? color.new(color.red, 90) : na)

// Alerts
alertcondition(bullish, title="Bullish Signal", message="Bullish crossover detected")
alertcondition(bearish, title="Bearish Signal", message="Bearish crossunder detected")

